# ç»Ÿä¸€çš„â€œå‡½æ•°å¼æ€ç»´æ¨¡å‹â€

## ä¸€ã€å…¨å±€è®¤çŸ¥

> **è¡¨è¾¾å¼ = äº§ç”Ÿå€¼çš„å…¬å¼**  
> **æ¡ä»¶è¡¨è¾¾å¼ = å¸¦é€‰æ‹©çš„è¡¨è¾¾å¼**  
> **lambda = æŠŠè¡¨è¾¾å¼è£…è¿›â€œå‡½æ•°å¯¹è±¡â€**  
> **åˆ—è¡¨æ¨å¯¼å¼ = for + if + è¡¨è¾¾å¼ çš„è¯­æ³•ç³–**  
> **map / filter / sorted / reduce = â€œæŠŠå‡½æ•°æ‰¹é‡ä½œç”¨åˆ°æ•°æ®ä¸Šâ€**

ğŸ‘‰ å®ƒä»¬ä¸æ˜¯å¹¶åˆ—å…³ç³»ï¼Œè€Œæ˜¯**å±‚çº§ + ç»„åˆå…³ç³»**

---

## äºŒã€ä»ã€Œè¡¨è¾¾å¼ã€å¼€å§‹ï¼ˆåœ°åŸºï¼‰

### 1ï¸âƒ£ ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼ï¼Ÿ

**è¡¨è¾¾å¼ = èƒ½ç®—å‡ºä¸€ä¸ªå€¼çš„ä¸œè¥¿**

```python
10 + 3        # è¡¨è¾¾å¼ â†’ 13
n * 2         # è¡¨è¾¾å¼ â†’ çœ‹ n æ˜¯ä»€ä¹ˆ
n > 20        # è¡¨è¾¾å¼ â†’ True / False
```

âŒ ä¸æ˜¯è¡¨è¾¾å¼ï¼š

```python
if n > 20:    # è¿™æ˜¯è¯­å¥
    ...
```

ğŸ‘‰ **Python å¾ˆå¤šé«˜çº§ç”¨æ³• = æƒ³åŠæ³•â€œåªç”¨è¡¨è¾¾å¼ï¼Œä¸ç”¨è¯­å¥â€**

---

## ä¸‰ã€æ¡ä»¶è¡¨è¾¾å¼ï¼ˆif-else çš„â€œè¡¨è¾¾å¼ç‰ˆâ€ï¼‰

ä½ å·²ç»è§è¿‡è¿™ä¸ªï¼š

```python
'æˆå¹´' if age >= 18 else 'æœªæˆå¹´'
```

è¿™æ˜¯ï¼š

```text
A if æ¡ä»¶ else B
```

ç‰¹ç‚¹åªæœ‰ä¸€ä¸ªï¼š  
âœ… **å®ƒæ˜¯è¡¨è¾¾å¼ï¼Œä¼šè¿”å›ä¸€ä¸ªå€¼**

æ‰€ä»¥ä½ å¯ä»¥ï¼š

```python
x = 1 if a > b else 2
```

ä¹Ÿå¯ä»¥ï¼š

```python
lambda age: 'æˆå¹´' if age >= 18 else 'æœªæˆå¹´'
```

âš ï¸ æ³¨æ„åŒºåˆ†ï¼š

|ç±»å‹|æ˜¯å¦è¿”å›å€¼|
|---|---|
|if è¯­å¥|âŒ|
|æ¡ä»¶è¡¨è¾¾å¼|âœ…|

---

## å››ã€lambdaï¼šæŠŠè¡¨è¾¾å¼â€œå°è£…æˆå‡½æ•°å¯¹è±¡â€

### 2ï¸âƒ£ lambda æœ¬è´¨åªæœ‰ä¸€å¥è¯

```text
lambda å‚æ•°: è¡¨è¾¾å¼
```

ğŸ‘‰ **lambda â‰  ç®€åŒ–ç‰ˆå‡½æ•°**  
ğŸ‘‰ **lambda = â€œå‡½æ•°å¯¹è±¡çš„å¿«æ·å†™æ³•â€**

ä¾‹å¦‚ï¼š

```python
lambda x: x * 2
```

ç­‰ä»·äºï¼š

```python
def f(x):
    return x * 2
```

âš ï¸ å…³é”®é™åˆ¶ï¼š

> **lambda é‡Œé¢åªèƒ½å†™â€œè¡¨è¾¾å¼â€ï¼Œä¸èƒ½å†™è¯­å¥**

æ‰€ä»¥å®ƒå¤©ç„¶å’Œä¸‹é¢è¿™äº›æ­é…ï¼š
- æ¡ä»¶è¡¨è¾¾å¼
- è¿ç®—è¡¨è¾¾å¼
- å±æ€§è®¿é—®

---

## äº”ã€map / filter / sorted / reduce çš„ã€Œç»Ÿä¸€æ¨¡å‹ã€

è¿™ä¸€æ­¥éå¸¸å…³é”® ğŸ‘‡  
æˆ‘ä»¬ç»Ÿä¸€ç”¨ä¸€å¥è¯æè¿°å®ƒä»¬ï¼š

> **â€œç»™æˆ‘ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ + ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘å¸®ä½ æ‰¹é‡å¤„ç†â€**

---

### 3ï¸âƒ£ map â€”â€”ã€Œå˜å½¢ï¼ˆprojectionï¼‰ã€

```python
map(å‡½æ•°, æ•°æ®)
```

```python
nums = [10, 20, 30, 40]
list(map(lambda n: n * 2, nums))
```

é€»è¾‘æ¨¡å‹ï¼š

```text
æ¯ä¸ªå…ƒç´  â†’ äº¤ç»™å‡½æ•° â†’ äº§ç”Ÿæ–°å€¼
```

ğŸŸ° åˆ—è¡¨æ¨å¯¼å¼ï¼š

```python
[n * 2 for n in nums]
```

---

### 4ï¸âƒ£ filter â€”â€”ã€Œç­›é€‰ï¼ˆwhereï¼‰ã€

```python
filter(å‡½æ•°, æ•°æ®)
```

```python
list(filter(lambda n: n > 20, nums))
```

é€»è¾‘æ¨¡å‹ï¼š

```text
æ¯ä¸ªå…ƒç´  â†’ åˆ¤æ–­ True / False â†’ å†³å®šè¦ä¸è¦
```

ğŸŸ° åˆ—è¡¨æ¨å¯¼å¼ï¼š

```python
[n for n in nums if n > 20]
```

---

### 5ï¸âƒ£ map + filter = åˆ—è¡¨æ¨å¯¼å¼å®Œæ•´ç‰ˆ

ä½ è¿™æ®µä»£ç ï¼š

```python
[n * 2 for n in nums if n > 20]
```

å®é™…ä¸Šç­‰ä»·äºï¼š

```python
list(
    map(
        lambda n: n * 2,
        filter(lambda n: n > 20, nums)
    )
)
```

ğŸ’¡ **è¿™å°±æ˜¯ä½ æ„Ÿè§‰â€œå®ƒä»¬äº’é€šâ€çš„æ ¹æœ¬åŸå› **

---

## å…­ã€sortedï¼šæœ¬è´¨ä¹Ÿæ˜¯ã€Œmap æ€ç»´ã€

```python
sorted(data, key=å‡½æ•°)
```

```python
sorted(nums, key=lambda x: -x)
```

æœ¬è´¨é€»è¾‘ï¼š

```text
æ¯ä¸ªå…ƒç´  â†’ keyå‡½æ•° â†’ ç”¨è¿”å›å€¼æ¥æ¯”è¾ƒ
```

ğŸŸ° SQLï¼š

```sql
ORDER BY key(x)
```

---

## ä¸ƒã€reduceï¼šçœŸæ­£çš„ã€Œèšåˆï¼ˆaggregateï¼‰ã€

```python
from functools import reduce

reduce(å‡½æ•°, æ•°æ®)
```

```python
reduce(lambda a, b: a + b, nums)
```

è¿‡ç¨‹æ˜¯ï¼š

```text
(((a âŠ• b) âŠ• c) âŠ• d)
```

ğŸŸ° SQLï¼š

```sql
SUM(nums)
```

âš ï¸ reduce **ä¸äº§ç”Ÿæ–°åˆ—è¡¨**ï¼Œè€Œæ˜¯**å‹æˆä¸€ä¸ªå€¼**

---

## å…«ã€ç»™ä½ ä¸€å¼ ã€Œè„‘å†…é€ŸæŸ¥è¡¨ã€

| å·¥å…·     | æœ¬è´¨           | SQL ç±»æ¯”         |
| ------ | ------------ | -------------- |
| è¡¨è¾¾å¼    | äº§ç”Ÿå€¼          | SELECT expr    |
| æ¡ä»¶è¡¨è¾¾å¼  | è¡¨è¾¾å¼ç‰ˆ if      | CASE WHEN      |
| lambda | è¡¨è¾¾å¼ â†’ å‡½æ•°     | å‡½æ•°å¯¹è±¡           |
| map    | å˜å½¢           | SELECT         |
| filter | ç­›é€‰           | WHERE          |
| åˆ—è¡¨æ¨å¯¼å¼  | map + filter | SELECT + WHERE |
| sorted | æ’åº           | ORDER BY       |
| reduce | èšåˆ           | SUM / COUNT    |

---

## ä¹ã€ä»€ä¹ˆæ—¶å€™ç”¨è°ï¼Ÿï¼ˆå®æˆ˜å†³ç­–ï¼‰

### âœ… æ¨èä½ æ—¥å¸¸ç”¨æ³•é¡ºåº

1ï¸âƒ£ **åˆ—è¡¨æ¨å¯¼å¼ï¼ˆæœ€ Pythonicï¼‰** 

```python
[n * 2 for n in nums if n > 20]
```

2ï¸âƒ£ **sorted + lambda** 

```python
sorted(nums, key=lambda x: -x)
```

3ï¸âƒ£ **reduceï¼ˆå°‘ç”¨ï¼Œä½†è¦æ‡‚ï¼‰** 

```python
sum(nums)   # ä¼˜äº reduce
```

âš ï¸ map / filter æ›´åï¼š
- å‡½æ•°å¼
- ç®¡é“é£æ ¼
- é˜…è¯»æˆæœ¬ç¨é«˜
